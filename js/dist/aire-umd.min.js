!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r((e=e||self).Aire={})}(this,function(e){"use strict";function d(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,a,o=[],i=!0,l=!1;try{for(t=t.call(e);!(i=(n=t.next()).done)&&(o.push(n.value),!r||o.length!==r);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==t.return||t.return()}finally{if(l)throw a}}return o}}(e,r)||s(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e){return function(e){if(Array.isArray(e))return n(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,r){if(e){if("string"==typeof e)return n(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(t="Object"===t&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?n(e,r):void 0}}function n(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function y(e){var r,t={},n=function(e,r){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=s(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,i=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return o=e.done,e},e:function(e){i=!0,a=e},f:function(){try{o||null==t.return||t.return()}finally{if(i)throw a}}}}(new FormData(e).entries());try{for(n.s();!(r=n.n()).done;){var a=d(r.value,2),o=a[0],i=a[1],l=o.replace(/\[]$/,""),u=l!==o;t[l]?(t[l]instanceof Array||(t[l]=[t[l]]),t[l].push(i)):t[l]=u?[i]:i}}catch(e){n.e(e)}finally{n.f()}return t}var p=!1,i={templates:{error:{prefix:"<li>",suffix:"</li>"}},classnames:{none:{},valid:{},invalid:{}}},v=function(e){e.form;var r=e.errors,t=e.data,n=e.rules,a=e.refs,o=e.touched,e=i,u=e.templates,s=e.classnames;Object.keys(n).forEach(function(e){var i,l;e in a&&(i=o.has(e)&&e in r,l=o.has(e)&&!i&&e in t,"errors"in a[e]&&(l?a[e].errors[0].innerHTML="":i&&(a[e].errors[0].innerHTML=r[e].map(function(e){return"".concat(u.error.prefix).concat(e).concat(u.error.suffix)}).join(""))),Object.entries(a[e]).forEach(function(e){var e=d(e,2),o=e[0];e[1].forEach(function(e){var r,t,n,a;o in s.valid&&((t=s.valid[o].split(" ")).length&&(l?(r=e.classList).add.apply(r,c(t)):i&&(r=e.classList).remove.apply(r,c(t)))),o in s.invalid&&((a=s.invalid[o].split(" ")).length&&(i?(t=e.classList).add.apply(t,c(a)):l&&(n=e.classList).remove.apply(n,c(a)))),o in s.none&&((n=s.none[o].split(" ")).length&&(l||i?(a=e.classList).remove.apply(a,c(n)):(e=e.classList).add.apply(e,c(n))))})}))})},m="undefined"!=typeof FormData&&"getAll"in FormData.prototype;e.configure=function(e){i=e},e.connect=function(e){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};if(!m)return null;p||(Validator.registerMissedRuleValidator(function(){return!0},""),Validator.useLang("en")),p=!0;function n(e,r,t){u[e]=u[e]||{},u[e][r]=u[e][r]||[],u[e][r].push(t)}var i,l="string"==typeof(e=e)?document.querySelector(e):e,u={};l.querySelectorAll("[data-aire-component]").forEach(function(e){var r,t;"aireFor"in e.dataset&&(r=e.dataset.aireFor,t=e.dataset.aireComponent,n(r,t,e),"aireValidationKey"in e.dataset&&t!==e.dataset.aireValidationKey&&n(r,e.dataset.aireValidationKey,e))});function r(e){(e=e.target.getAttribute("name"))&&f.add(e.replace(/\[]$/,""))}function t(e){void 0!==e&&"target"in e&&r(e);var n=0;clearTimeout(s),s=setTimeout(function(){var e=y(l);i=new Validator(e,a,o);var r=++n;1===r&&Object.entries(e).forEach(function(e){var r=d(e,2),e=r[0],r=r[1];null!=r&&""!==r&&(Array.isArray(r)&&0===r.length||e in u&&"errors"in u[e]&&0<u[e].errors[0].childElementCount||f.add(e))});function t(){c&&r===n&&v({form:l,rules:a,touched:f,refs:u,data:e,errors:i.errors.all()})}i.checkAsync(t,t)},250)}var s,c=!0,f=new Set;l.addEventListener("change",t,!0),l.addEventListener("keyup",t,!0),l.addEventListener("focus",r,!0),t();return{get valid(){return void 0!==i&&0===Object.keys(i.errors.all()).length},get data(){return void 0===i?y(l):i.input},get validator(){return i},run:t,disconnect:function(){c=!1,clearTimeout(s),l.removeEventListener("change",t),l.removeEventListener("keyup",t),l.removeEventListener("focus",r)}}},e.setRenderer=function(e){v=e},e.supported=m,Object.defineProperty(e,"__esModule",{value:!0})});
